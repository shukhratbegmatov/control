import{d as F,v as C,i as v,r as f,o as d,c as _,b as o,j as l,x as j,z as $,f as U,e as m,w as i,l as h,F as z,k as E,D as N,_ as S}from"./index-BDIMaXIl.js";import{g as q}from"./generate-Bak5_hll.js";import{D as B}from"./docs-DODzUvDM.js";const M="/assets/pdf-DGMwnYq5.png",H="/assets/file-COy3QgRh.svg",I="/assets/download-DcArgHxm.svg",L=["jpg","jpeg","jpe","jif","jfif","jfi","png","gif","webp","tiff","tif","heif","heic","ind","indd","indt","psd","raw","arw","cr","rw2","nrw","k25","svg","svgz","pjp","bmp","ico","xbm","dib","pjpeg","avif","cr2","jp2","j2k","jpm","mj2"],O=["flv","f4v","f4p","f4a","f4b","nsv","roq","mxf","3g2","3gp","svi","m4v","m2v","mpeg","mpg","mpv","mpe","mpeg","mp2","mpg","m4v","mp4","m4p","amv","asf","viv","rmvb","rm","yuv","wmv","mov","qt","mts","m2ts","ts","avi","mng","gifv","gif","drc","ogg","ogv","vob","flv","flv","mkv","webm"],P={class:"p-4 rounded-2xl bg-white border broder-grey-100 flex justify-between items-center gap-4 mb-4"},R={class:"flex items-center"},T={key:0,class:"flex items-center justify-center bg-[#FFEDED] w-12 h-12"},A=o("img",{src:M,alt:""},null,-1),G=[A],K={key:1,class:"flex items-center justify-center bg-blue-50 w-12 h-12"},Q={key:2,class:"flex items-center justify-center bg-blue-50 w-12 h-12"},Y=o("img",{class:"cursor-pointer w-10",src:H,alt:""},null,-1),J=[Y],W={class:"text-sm"},X={class:"font-semibold"},Z=["src"],ee=F({__name:"FileShow",props:{data:{},deletable:{type:Boolean}},emits:["delete"],setup(x,{emit:D}){let n=x,c=C(()=>{var e;return((e=n.data.path.split(".").pop())==null?void 0:e.toLowerCase())||""}),s=C(()=>L.includes(c.value)?"image":O.includes(c.value)?"video":c.value=="pdf"?"pdf":"other"),t=v(!1);function p(){if(s.value=="pdf"||s.value=="video")t.value=!0;else{if(s.value=="image")return;u()}}let b="https://media-control.madaniymeros.uz/";function u(){let e=document.createElement("a");e.download=`${n.data.name||"file"}`,e.href=`${b}/${n.data.path}`,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}return(e,r)=>{const g=f("n-image"),y=f("n-card"),k=f("n-modal");return d(),_(z,null,[o("div",P,[o("div",R,[o("div",{class:"cursor-pointer mr-4 rounded-xl overflow-hidden",onClick:p},[l(s)=="pdf"?(d(),_("div",T,G)):l(s)=="image"?(d(),_("div",K,[e.data.path?(d(),j(g,{key:0,src:e.$withBaseUrl(e.data.path)},null,8,["src"])):$("",!0)])):(d(),_("div",Q,J))]),o("div",W,[o("div",X,U(e.data.name),1)])]),o("div",{class:"flex justify-end items-center gap-2"},[o("img",{onClick:u,class:"cursor-pointer w-10 border border-grey-100 rounded-full p-2",src:I,alt:""})])]),m(k,{show:l(t),"onUpdate:show":r[1]||(r[1]=w=>h(t)?t.value=w:t=w)},{default:i(()=>[m(y,{title:e.data.name,class:"max-w-[800px]",closable:"",onClose:r[0]||(r[0]=w=>h(t)?t.value=!1:t=!1)},{default:i(()=>[o("iframe",{width:"100%",src:`${e.$baseUrl}/${e.data.path}`,style:{"min-height":"80vh","background-color":"#ffffff"},frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""},null,8,Z)]),_:1},8,["title"])]),_:1},8,["show"])],64)}}}),te=["src"],le=F({__name:"ViewDoc",props:{pageMode:{type:Boolean}},setup(x,{expose:D}){let n=v(!1),c=v(!1),s=v(""),t=v("document"),p=v();async function b(u){try{c.value=!0,n.value=!0;let e=await B.getDocByKey(u);p.value=e.data.data;let r=q(e.data.data),g=await B.viewPdf(r);s.value=g.data.pdf}catch{p.value=void 0,s.value=""}finally{c.value=!1}}return D({view:b}),(u,e)=>{const r=f("n-tab-pane"),g=ee,y=f("n-tabs"),k=f("n-spin"),w=f("n-card");return d(),j(S(u.pageMode?"div":"n-drawer"),{width:1e3,show:l(n),"onUpdate:show":e[1]||(e[1]=a=>h(n)?n.value=a:n=a)},{default:i(()=>[m(w,{class:"h-screen"},{header:i(()=>{var a;return[E(U((a=l(p))==null?void 0:a.title),1)]}),default:i(()=>[m(k,{show:l(c)},{default:i(()=>[m(y,{type:"segment",animated:"",value:l(t),"onUpdate:value":e[0]||(e[0]=a=>h(t)?t.value=a:t=a)},{default:i(()=>[m(r,{name:"document",tab:"Hujjat"},{default:i(()=>[l(s)?(d(),_("embed",{key:0,width:"100%",src:`data:application/pdf;base64,${l(s)}`,style:"min-height:calc(100vh - 140px); background-color: #ffffff",frameborder:"0",webkitallowfullscreen:"",mozallowfullscreen:"",allowfullscreen:""},null,8,te)):$("",!0)]),_:1}),m(r,{name:"basis",tab:"Ilova"},{default:i(()=>{var a;return[(d(!0),_(z,null,N((a=l(p))==null?void 0:a.files,V=>(d(),j(g,{class:"mb-2",data:V},null,8,["data"]))),256))]}),_:1})]),_:1},8,["value"])]),_:1},8,["show"])]),_:1})]),_:1},40,["show"])}}});export{le as _};
